/**
 * My version of the plugin jQuery bxSlider v3.0
 * https://github.com/alessandro-sena/bxslider
 *
 * The bug when lastSlide is not multiple of displaySlideQty is fixed
 *	
 * Original version created by Steven Wanderski
 * Copyright 2011, Steven Wanderski
 * http://bxcreative.com
 *
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 */

(function($){$.fn.bxSlider=function(j){var k={mode:'horizontal',infiniteLoop:true,hideControlOnEnd:false,controls:true,speed:500,easing:'swing',pager:false,pagerSelector:null,pagerType:'full',pagerLocation:'bottom',pagerShortSeparator:'/',pagerActiveClass:'pager-active',nextText:'next',nextImage:'',nextSelector:null,prevText:'prev',prevImage:'',prevSelector:null,captions:false,captionsSelector:null,auto:false,autoDirection:'next',autoControls:false,autoControlsSelector:null,autoStart:true,autoHover:false,autoDelay:0,pause:3000,startText:'start',startImage:'',stopText:'stop',stopImage:'',ticker:false,tickerSpeed:5000,tickerDirection:'next',tickerHover:false,wrapperClass:'bx-wrapper',startingSlide:0,displaySlideQty:1,moveSlideQty:1,randomStart:false,onBeforeSlide:function(){},onAfterSlide:function(){},onLastSlide:function(){},onFirstSlide:function(){},onNextSlide:function(){},onPrevSlide:function(){},buildPager:null}var j=$.extend(k,j);var l=this;var m='';var n='';var o='';var p='';var q='';var r='';var s='';var t='';var u='';var v='';var w='';var x='';var y='';var z='';var A='';var B=true;var C=false;var D=0;var E=0;var F=0;var G=0;var H=0;var I=0;var J=0;var K=0;var L=0;var M=false;var N=0;var O=o.length-1;this.goToSlide=function(a,b){if(!M){M=true;F=a;j.onBeforeSlide(F,o.length,o.eq(F));if(typeof(b)=='undefined'){var b=true}if(b){if(j.auto){l.stopShow(true)}}slide=a;if(slide==N){j.onFirstSlide(F,o.length,o.eq(F))}if(slide==O){j.onLastSlide(F,o.length,o.eq(F))}if(j.mode=='horizontal'){m.animate({'left':'-'+getSlidePosition(slide,'left')+'px'},j.speed,j.easing,function(){M=false;j.onAfterSlide(F,o.length,o.eq(F))})}else if(j.mode=='vertical'){m.animate({'top':'-'+getSlidePosition(slide,'top')+'px'},j.speed,j.easing,function(){M=false;j.onAfterSlide(F,o.length,o.eq(F))})}else if(j.mode=='fade'){setChildrenFade()}checkEndControls();if(j.moveSlideQty>1){a=Math.floor(a/j.moveSlideQty)}makeSlideActive(a);showCaptions()}}this.goToNextSlide=function(a){if(typeof(a)=='undefined'){var a=true}if(a){if(j.auto){l.stopShow(true)}}if(!j.infiniteLoop){if(!M){var b=false;F=(F+(j.moveSlideQty));if(F<=O){checkEndControls();j.onNextSlide(F,o.length,o.eq(F));l.goToSlide(F)}else{F-=j.moveSlideQty}}}else{if(!M){M=true;var b=false;F=(F+j.moveSlideQty);if(F>O){F=F%o.length;b=true}j.onNextSlide(F,o.length,o.eq(F));j.onBeforeSlide(F,o.length,o.eq(F));if(j.mode=='horizontal'){var c=(j.moveSlideQty*s);m.animate({'left':'-='+c+'px'},j.speed,j.easing,function(){M=false;if(b){m.css('left','-'+getSlidePosition(F,'left')+'px')}j.onAfterSlide(F,o.length,o.eq(F))})}else if(j.mode=='vertical'){var d=(j.moveSlideQty*E);m.animate({'top':'-='+d+'px'},j.speed,j.easing,function(){M=false;if(b){m.css('top','-'+getSlidePosition(F,'top')+'px')}j.onAfterSlide(F,o.length,o.eq(F))})}else if(j.mode=='fade'){setChildrenFade()}if(j.moveSlideQty>1){makeSlideActive(Math.ceil(F/j.moveSlideQty))}else{makeSlideActive(F)}showCaptions()}}}this.goToPreviousSlide=function(a){if(typeof(a)=='undefined'){var a=true}if(a){if(j.auto){l.stopShow(true)}}if(!j.infiniteLoop){if(!M){var b=false;F=F-j.moveSlideQty;if(F<0){F=0;if(j.hideControlOnEnd){$('.bx-prev',p).hide()}}checkEndControls();j.onPrevSlide(F,o.length,o.eq(F));l.goToSlide(F)}}else{if(!M){M=true;var b=false;F=(F-(j.moveSlideQty));if(F<0){negativeOffset=(F%o.length);if(negativeOffset==0){F=0}else{F=(o.length)+negativeOffset}b=true}j.onPrevSlide(F,o.length,o.eq(F));j.onBeforeSlide(F,o.length,o.eq(F));if(j.mode=='horizontal'){var c=(j.moveSlideQty*s);m.animate({'left':'+='+c+'px'},j.speed,j.easing,function(){M=false;if(b){m.css('left','-'+getSlidePosition(F,'left')+'px')}j.onAfterSlide(F,o.length,o.eq(F))})}else if(j.mode=='vertical'){var d=(j.moveSlideQty*E);m.animate({'top':'+='+d+'px'},j.speed,j.easing,function(){M=false;if(b){m.css('top','-'+getSlidePosition(F,'top')+'px')}j.onAfterSlide(F,o.length,o.eq(F))})}else if(j.mode=='fade'){setChildrenFade()}if(j.moveSlideQty>1){makeSlideActive(Math.ceil(F/j.moveSlideQty))}else{makeSlideActive(F)}showCaptions()}}}this.goToFirstSlide=function(a){if(typeof(a)=='undefined'){var a=true}l.goToSlide(N,a)}this.goToLastSlide=function(){if(typeof(a)=='undefined'){var a=true}l.goToSlide(O,a)}this.getCurrentSlide=function(){return F}this.getSlideCount=function(){return o.length}this.stopShow=function(a){clearInterval(w);if(typeof(a)=='undefined'){var a=true}if(a&&j.autoControls){x.html(z).removeClass('stop').addClass('start');B=false}}this.startShow=function(a){if(typeof(a)=='undefined'){var a=true}setAutoInterval();if(a&&j.autoControls){x.html(A).removeClass('start').addClass('stop');B=true}}this.stopTicker=function(a){m.stop();if(typeof(a)=='undefined'){var a=true}if(a&&j.ticker){x.html(z).removeClass('stop').addClass('start');B=false}}this.startTicker=function(a){if(j.mode=='horizontal'){if(j.tickerDirection=='next'){var b=parseInt(m.css('left'));var c=(I+b)+o.eq(0).width()}else if(j.tickerDirection=='prev'){var b=-parseInt(m.css('left'));var c=(b)-o.eq(0).width()}var d=(c*j.tickerSpeed)/I;moveTheShow(K,c,d)}else if(j.mode=='vertical'){if(j.tickerDirection=='next'){var e=parseInt(m.css('top'));var c=(J+e)+o.eq(0).height()}else if(j.tickerDirection=='prev'){var e=-parseInt(m.css('top'));var c=(e)-o.eq(0).height()}var d=(c*j.tickerSpeed)/J;moveTheShow(L,c,d);if(typeof(a)=='undefined'){var a=true}if(a&&j.ticker){x.html(A).removeClass('start').addClass('stop');B=true}}}this.initShow=function(){m=$(this);n=m.clone();o=m.children();p='';q=m.children(':first');r=q.width();D=0;s=q.outerWidth();E=0;t=getWrapperWidth();u=getWrapperHeight();M=false;v='';F=0;G=0;H=0;w='';x='';y='';z='';A='';B=true;C=false;I=0;J=0;K=0;L=0;N=0;O=o.length-1;o.each(function(a){if($(this).outerHeight()>E){E=$(this).outerHeight()}if($(this).outerWidth()>D){D=$(this).outerWidth()}});if(j.randomStart){var b=Math.floor(Math.random()*o.length);F=b;G=s*(j.moveSlideQty+b);H=E*(j.moveSlideQty+b)}else{F=j.startingSlide;G=s*(j.moveSlideQty+j.startingSlide);H=E*(j.moveSlideQty+j.startingSlide)}initCss();if(j.pager&&!j.ticker){if(j.pagerType=='full'){showPager('full')}else if(j.pagerType=='short'){showPager('short')}}if(j.controls&&!j.ticker){setControlsVars()}if(j.auto||j.ticker){if(j.autoControls){setAutoControlsVars()}if(j.autoStart){setTimeout(function(){l.startShow(true)},j.autoDelay)}else{l.stopShow(true)}if(j.autoHover&&!j.ticker){setAutoHover()}}if(j.moveSlideQty>1){makeSlideActive(Math.ceil(F/j.moveSlideQty))}else{makeSlideActive(F)}checkEndControls();if(j.captions){showCaptions()}j.onAfterSlide(F,o.length,o.eq(F))}this.destroyShow=function(){clearInterval(w);$('.bx-next, .bx-prev, .bx-pager, .bx-auto',p).remove();m.unwrap().unwrap().removeAttr('style');m.children().removeAttr('style').not('.pager').remove();o.removeClass('pager')}this.reloadShow=function(){l.destroyShow();l.initShow()}function initCss(){setChildrenLayout(j.startingSlide);if(j.mode=='horizontal'){m.wrap('<div class="'+j.wrapperClass+'" style="width:'+t+'px; position:relative;"></div>').wrap('<div class="bx-window" style="position:relative; overflow:hidden; width:'+t+'px;"></div>').css({width:'999999px',position:'relative',left:'-'+(G)+'px'});m.children().css({width:r,'float':'left',listStyle:'none'});p=m.parent().parent();o.addClass('pager')}else if(j.mode=='vertical'){m.wrap('<div class="'+j.wrapperClass+'" style="width:'+D+'px; position:relative;"></div>').wrap('<div class="bx-window" style="width:'+D+'px; height:'+u+'px; position:relative; overflow:hidden;"></div>').css({height:'999999px',position:'relative',top:'-'+(H)+'px'});m.children().css({listStyle:'none',height:E});p=m.parent().parent();o.addClass('pager')}else if(j.mode=='fade'){m.wrap('<div class="'+j.wrapperClass+'" style="width:'+D+'px; position:relative;"></div>').wrap('<div class="bx-window" style="height:'+E+'px; width:'+D+'px; position:relative; overflow:hidden;"></div>');m.children().css({listStyle:'none',position:'absolute',top:0,left:0,zIndex:98});p=m.parent().parent();o.not(':eq('+F+')').fadeTo(0,0);o.eq(F).css('zIndex',99)}if(j.captions&&j.captionsSelector==null){p.append('<div class="bx-captions"></div>')}}function setChildrenLayout(){if(j.mode=='horizontal'||j.mode=='vertical'){var b=getArraySample(o,0,j.moveSlideQty,'backward');$.each(b,function(a){m.prepend($(this))});var c=(o.length+j.moveSlideQty)-1;var d=o.length-j.displaySlideQty;var e=c-d;var f=getArraySample(o,0,e,'forward');if(j.infiniteLoop){$.each(f,function(a){m.append($(this))})}}}function setControlsVars(){if(j.nextImage!=''){nextContent=j.nextImage;nextType='image'}else{nextContent=j.nextText;nextType='text'}if(j.prevImage!=''){prevContent=j.prevImage;prevType='image'}else{prevContent=j.prevText;prevType='text'}showControls(nextType,nextContent,prevType,prevContent)}function setAutoInterval(){if(j.auto){if(!j.infiniteLoop){if(j.autoDirection=='next'){w=setInterval(function(){F+=j.moveSlideQty;if(F>O){F=F%o.length}l.goToSlide(F,false)},j.pause)}else if(j.autoDirection=='prev'){w=setInterval(function(){F-=j.moveSlideQty;if(F<0){negativeOffset=(F%o.length);if(negativeOffset==0){F=0}else{F=(o.length)+negativeOffset}}l.goToSlide(F,false)},j.pause)}}else{if(j.autoDirection=='next'){w=setInterval(function(){l.goToNextSlide(false)},j.pause)}else if(j.autoDirection=='prev'){w=setInterval(function(){l.goToPreviousSlide(false)},j.pause)}}}else if(j.ticker){j.tickerSpeed*=10;$('.pager',p).each(function(a){I+=$(this).width();J+=$(this).height()});if(j.tickerDirection=='prev'&&j.mode=='horizontal'){m.css('left','-'+(I+G)+'px')}else if(j.tickerDirection=='prev'&&j.mode=='vertical'){m.css('top','-'+(J+H)+'px')}if(j.mode=='horizontal'){K=parseInt(m.css('left'));moveTheShow(K,I,j.tickerSpeed)}else if(j.mode=='vertical'){L=parseInt(m.css('top'));moveTheShow(L,J,j.tickerSpeed)}if(j.tickerHover){setTickerHover()}}}function moveTheShow(a,b,c){if(j.mode=='horizontal'){if(j.tickerDirection=='next'){m.animate({'left':'-='+b+'px'},c,'linear',function(){m.css('left',a);moveTheShow(a,I,j.tickerSpeed)})}else if(j.tickerDirection=='prev'){m.animate({'left':'+='+b+'px'},c,'linear',function(){m.css('left',a);moveTheShow(a,I,j.tickerSpeed)})}}else if(j.mode=='vertical'){if(j.tickerDirection=='next'){m.animate({'top':'-='+b+'px'},c,'linear',function(){m.css('top',a);moveTheShow(a,J,j.tickerSpeed)})}else if(j.tickerDirection=='prev'){m.animate({'top':'+='+b+'px'},c,'linear',function(){m.css('top',a);moveTheShow(a,J,j.tickerSpeed)})}}}function setAutoControlsVars(){if(j.startImage!=''){startContent=j.startImage;startType='image'}else{startContent=j.startText;startType='text'}if(j.stopImage!=''){stopContent=j.stopImage;stopType='image'}else{stopContent=j.stopText;stopType='text'}showAutoControls(startType,startContent,stopType,stopContent)}function setAutoHover(){p.find('.bx-window').hover(function(){if(B){l.stopShow(false)}},function(){if(B){l.startShow(false)}})}function setTickerHover(){m.hover(function(){if(B){l.stopTicker(false)}},function(){if(B){l.startTicker(false)}})}function setChildrenFade(){o.not(':eq('+F+')').fadeTo(j.speed,0).css('zIndex',98);o.eq(F).css('zIndex',99).fadeTo(j.speed,1,function(){M=false;if(jQuery.browser.msie){o.eq(F).get(0).style.removeAttribute('filter')}j.onAfterSlide(F,o.length,o.eq(F))})};function makeSlideActive(a){if(j.pagerType=='full'&&j.pager){$('a',v).removeClass(j.pagerActiveClass);$('a',v).eq(a).addClass(j.pagerActiveClass)}else if(j.pagerType=='short'&&j.pager){$('.bx-pager-current',v).html(F+1)}}function showControls(a,b,c,d){var e=$('<a href="" class="bx-next"></a>');var f=$('<a href="" class="bx-prev"></a>');if(a=='text'){e.html(b)}else{e.html('<img src="'+b+'" />')}if(c=='text'){f.html(d)}else{f.html('<img src="'+d+'" />')}if(j.prevSelector){$(j.prevSelector).append(f)}else{p.append(f)}if(j.nextSelector){$(j.nextSelector).append(e)}else{p.append(e)}e.click(function(){l.goToNextSlide();return false});f.click(function(){l.goToPreviousSlide();return false})}function showPager(b){var c=o.length;if(j.moveSlideQty>1){if(o.length%j.moveSlideQty!=0){c=Math.ceil(o.length/j.moveSlideQty)}else{c=o.length/j.moveSlideQty}}var d='';if(j.buildPager){for(var i=0;i<c;i++){d+=j.buildPager(i,o.eq(i*j.moveSlideQty))}}else if(b=='full'){for(var i=1;i<=c;i++){d+='<a href="" class="pager-link pager-'+i+'">'+i+'</a>'}}else if(b=='short'){d='<span class="bx-pager-current">'+(j.startingSlide+1)+'</span> '+j.pagerShortSeparator+' <span class="bx-pager-total">'+o.length+'</span>'}if(j.pagerSelector){$(j.pagerSelector).append(d);v=$(j.pagerSelector)}else{var e=$('<div class="bx-pager"></div>');e.append(d);if(j.pagerLocation=='top'){p.prepend(e)}else if(j.pagerLocation=='bottom'){p.append(e)}v=$('.bx-pager',p)}v.children().click(function(){if(j.pagerType=='full'){var a=v.children().index(this);if(j.moveSlideQty>1){a*=j.moveSlideQty}l.goToSlide(a)}return false})}function showCaptions(){var a=$('img',o.eq(F)).attr('title');if(a!=''){if(j.captionsSelector){$(j.captionsSelector).html(a)}else{$('.bx-captions',p).html(a)}}else{if(j.captionsSelector){$(j.captionsSelector).html('&nbsp;')}else{$('.bx-captions',p).html('&nbsp;')}}}function showAutoControls(a,b,c,d){x=$('<a href="" class="bx-start"></a>');if(a=='text'){z=b}else{z='<img src="'+b+'" />'}if(c=='text'){A=d}else{A='<img src="'+d+'" />'}if(j.autoControlsSelector){$(j.autoControlsSelector).append(x)}else{p.append('<div class="bx-auto"></div>');$('.bx-auto',p).html(x)}x.click(function(){if(j.ticker){if($(this).hasClass('stop')){l.stopTicker()}else if($(this).hasClass('start')){l.startTicker()}}else{if($(this).hasClass('stop')){l.stopShow(true)}else if($(this).hasClass('start')){l.startShow(true)}}return false})}function checkEndControls(){if(!j.infiniteLoop&&j.hideControlOnEnd){if(F==N){$('.bx-prev',p).hide()}else{$('.bx-prev',p).show()}var a=Math.floor(O/j.displaySlideQty)*j.displaySlideQty;if(F>=a){$('.bx-next',p).hide()}else{$('.bx-next',p).show()}}}function getSlidePosition(a,b){if(b=='left'){var c=$('.pager',p).eq(a).position().left}else if(b=='top'){var c=$('.pager',p).eq(a).position().top}return c}function getWrapperWidth(){var a=q.outerWidth()*j.displaySlideQty;return a}function getWrapperHeight(){var a=q.outerHeight()*j.displaySlideQty;return a}function getArraySample(c,d,e,f){var g=[];var h=e;var i=false;if(f=='backward'){c=$.makeArray(c);c.reverse()}while(h>0){$.each(c,function(a,b){if(h>0){if(!i){if(a==d){i=true;g.push($(this).clone());h--}}else{g.push($(this).clone());h--}}else{return false}})}return g}this.each(function(){if($(this).children().length>0){l.initShow()}});return this}jQuery.fx.prototype.cur=function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var r=parseFloat(jQuery.css(this.elem,this.prop));return r}})(jQuery);
